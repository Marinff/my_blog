---
title: OWASP
date: '2025-05-05 09:40:39'
updated: '2025-05-09 09:32:05'
permalink: /post/owasp-2phxh.html
comments: true
toc: true
---



# OWASP

## WEB

---

### OWASP   TOP10

---

#### A01   访问控制失效(**[Broken Access Control](https://owasp.org/Top10/A01_2021-Broken_Access_Control/)**)

---

描述：
应用程序没能对用户对资源的访问进行正确的限制，会导致未经授权的信息泄露、修改或者所有数据被销毁了，或执行超出了用户限制的业务功能

常见漏洞：

* 本来只有少部分角色、用户或功能有访问权限，但是现在任何人都有访问权限（没有对访问（或许是权限）进行控制）
* 修改url、应用程序内部状态、HTML页面或者使用攻击工具修改API请求绕过访问控制检查（这个怎么像下面两个的攻击方式）
* 有一个唯一标识符可以直接访问资源，比如用户id，修改了就可以直接查看其他人的用户（这个像水平越权）
* 访问API时缺少POST、PUT、DELETE的访问控制
* 越权，未登录时以用户身份运行，或以用户身份登录时以管理员身份运行（这个更像垂直越权）

  * 水平越权：攻击者以相同权限，访问其他用户的资源
  * 垂直越权：攻击者以低权限身份，获取更高级别的访问权限
* 元数据操纵，重放或篡改JWT访问控制令牌，或操纵cookie或隐藏字段以提升权限或滥用JWT无效化

  * 重放JWT：攻击者捕获有效的JWT，再后续的请求中重放这个JWT，以冒充合法用户
  * 篡改JWT（操纵cookie或隐藏字段）：攻击者修改JWT的内容，提升自己的权限
  * 滥用JWT无效化：一般JWT生成就不能被撤销，除非有额外的机制来管理有效性，如果攻击者利用这一点，就可以在有效的JWT过期后继续使用，或保持未授权的访问
* CORS配置错误允许来自未经授权/不受信任的来源的API访问
* 强制以未经身份验证的用户浏览经过身份验证的页面或以标准用户身份浏览特权页面（这个怎么感觉和上面那个重复了）

> 一些名词的理解
>
> **API**：应用程序编程接口，是一些预先定义的函数，允许不同软件系统相互通信和交互的工具和协议
> 在系统中被封装好的函数，就叫做api，就是可以直接使用的函数
>
> **JWT**（JSON Web Token）：用JSON形式作为web应用中的令牌，客户端登录后，服务端就会生成一个JWT令牌返回给客户端，客户端会将该令牌存储在本地，之后的通信就把该令牌作为身份验证信息，JWT令牌是无法撤销的，因此要设置较短的过期时间，也要确保令牌过期后及时刷新
>
> **CORS**：跨来源资源共享，允许或限制服务器向跨源服务器发出请求，服务器可以通过这个来声明哪些源可以访问其资源

在练习时看到的有关的漏洞

> **跨站请求伪造漏洞（csrf）** ：攻击者盗取用户的身份，用这个身份发送恶意请求，对服务器来说这个是合法的，但是却完成了攻击者的操作
>
> **IDOR(不安全的直接对象参考)** :网站中有很多变量，例如’id‘，’uid‘，这些值通常被视为HTTP参数，攻击者可以通过更改这些值来访问，编辑或删除其他用户的对象

#### A02 加密故障(**[Cryptographic Failures](https://owasp.org/Top10/A02_2021-Cryptographic_Failures/)**)

---

描述：
和加密机制相关的故障（缺乏加密机制）导致敏感数据的泄露

会导致漏洞的：

* 明文传输的数据
* 使用旧的或弱的加密算法或协议
* 使用默认加密密钥，重复使用弱加密密钥，缺少密钥管理或轮换
* 没强制加密
* 收到的服务器证书和信任链没经过正确验证
* 使用MD5或SHA1等弃用的哈希函数，或者在需要加密哈希函数时使用非加密哈希函数

这个感觉主要检查加密的过程

#### A03 注入(**[Injection](https://owasp.org/Top10/A03_2021-Injection/)**)

---

描述：
在可输入参数的地方，通过构造恶意代码，进而威胁数据库安全以及web安全

易受攻击的原因：

* 应用程序不会过滤、验证或清理用户提供的数据
* 没有上下文感知转义的动态查询或非参数化调用直接在解释器中使用
  * 非参数化调用：直接将用户的输入嵌入代码中，不经过任何处理或转义
  * 上下文感知转义：在输入输出到网页或上下文中之前，进行适当的转义
* 使用恶意数据用于ORM（对象关系映射）搜索参数来提取额外的敏感记录
* 直接使用恶意数据或拼接，用在SQL的动态查询、命令或存储过程中

> ORM：将对象模型（通常是开发中的类）映射到关系数据库中的技术

常见漏洞：

* sql注入
* xss注入

#### A04 不安全设计 (**[Insecure Design](https://owasp.org/Top10/A04_2021-Insecure_Design/)**)

---

描述：
这个原文好像是分为不安全设计和不安全实施，不安全设计是在设计的时候没有必要的安全措施，不安全实施是设计是安全的，但是在部署和实施的时候出问题，没有按要求（这个翻译看的云里雾里的）

#### A05 安全配置错误(**[Security Misconfiguration](https://owasp.org/Top10/A05_2021-Security_Misconfiguration/)**)

---

描述：
如果包含了这几个因素，可能会增加脆弱性

* 缺少合适的安全加固。或是云服务的权限配置不当
* 启用了不必要的功能或安装了不必要的组件
* 不更改默认账户和密码
* 因错误处理向用户显示堆栈跟踪或暴露过多的错误警告咨询
* 因为系统升级导致安全功能被关闭或伪以安全方式配置
* 应用服务器，应用程序框架，数据库等的安全设置没有配置为安全值
* 服务器没发送安全头或指示，没设置为安全值
* 软件已被淘汰或存在漏洞

#### A06 易受攻击和过时的组件(**[Vulnerable and Outdated Components](https://owasp.org/Top10/A06_2021-Vulnerable_and_Outdated_Components/)**)

---

描述：
可能会带来攻击的

* 不知道使用的组件的版本（服务器端和客户端的都要知道）包括直接使用和依赖项
* 使用的软件易受攻击，不受支持，已过期，包括操作系统，应用程序服务器，数据库管理系统，应用程序，api等（这个怎么和上面那个类似
* 不定期扫描漏洞，不看和组件相关的安全公告
* 没有及时基于风险更新或修复底层平台，框架和依赖

  * 一般会把补丁的应用安排在固定的时间点，每月或每个季度，可能会导致已知的漏洞无法及时修复，这段时间可能会使漏洞暴露，产生安全风险
* 软件开发人员不测试更新，升级或修补库的兼容性
* 不保护组件的配置

#### A07 身份识别和身份验证失败 (**[Identification and Authentication Failures](https://owasp.org/Top10/A07_2021-Identification_and_Authentication_Failures/)**)

---

描述：
确认用户的身份，认证和会话管理对于防止与认证相关的问题很重要，如果应用存在以下情况，可能会导致漏洞出现

* 允许凭证填充攻击（一种自动化攻击方式），利用其他网站已泄露的用户名和密码来尝试登录
* 允许暴力攻击或其他自动化攻击
* 允许使用默认密码或弱密码
* 允许使用弱或无效的凭证恢复或密码找回流程（例如使用知识问答，可能通过社工获得信息）
* 使用纯文本、加密或弱哈希存储密码
* 缺乏或无效的多因素认证（多重验证）
* 在url中存储session
* 成功登录后重复使用session
* 没有正确在登出时或一段时间没活动后注销sessionID 、 session 、tokens

#### A08 软件和数据完整性失效(**[Software and Data Integrity Failures](https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/)**)

---

描述：
软件和数据完整性失效与未能防止完整性违规的代码和基础建设有关

* 当对象或数据被编码或序列化成攻击者可以看到和修改的结构时，应用可能会收到不安全的反序列化攻击，让攻击者可以操作数据，导致应用执行未授权的操作
* 应用依赖于不可信来源的插件、库或模块，攻击者可以利用这些组件入侵系统
* 不安全的CI/CD管道（持续集成/程序交付）如果设计不当，可能会引入未授权的访问或恶意代码
* 有些应用有自动更新的功能，如果更新没经过充分的完整性验证，可能会导致攻击者上传恶意更新

#### A09 安全日志和监控失效(**[Security Logging and Monitoring Failures](https://owasp.org/Top10/A09_2021-Security_Logging_and_Monitoring_Failures/)**)

---

描述：
安全日志和监控是帮助检测、上报并响应主动违规行为，没有日志记录，则无法检测到违规行为，可能会导致

* 未记录可审计事件，如登录，登录失败，高价值交易
* 警告和错误产生的日志信息没有，不足或不清晰
* 不对应用和API的日记进行监控来识别可疑活动
* 日志只存储在本地
* 不合理的警告阈值和响应升级流程缺失或无效
  * 不合理的警告阈值会导致误报，浪费资源
  * 响应升级流程缺失会导致响应延迟
* 渗透测试和动态应用安全测试工具不触发警报
* 应用程序无法实时或及时检测、升级或警告活跃攻击

> 序列化：将对象转换为字节序列的过程
> 反序列化：将字节序列恢复为对象
>
> 为什么要序列化
>
> * 序列化后可以长久地保存对象的内容
> * 所有在网络上传输的对象都必须是可序列化的

#### A10 服务端请求伪造(**[Server-Side Request Forgery](https://owasp.org/Top10/A10_2021-Server-Side_Request_Forgery_(SSRF)/)**)

---

描述：
web应用在从其他服务器应用获取数据时没对用户（目标地址）的url进行验证（过滤和限制），这时就会发生伪造服务端请求，攻击者能够诱使应用向意外的目标发送构造的请求，即便有防火墙、vpn或其他类型的网络访问控制列表保护下也一样
